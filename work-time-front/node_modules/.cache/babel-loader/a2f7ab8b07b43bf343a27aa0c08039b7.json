{"ast":null,"code":"import DurationService from \"../API/DurationService\";\nconst EMPLOYEE_ID = 31;\n\nasync function FixExecuting() {\n  let duration = await DurationService.getByUserAndIsLast(EMPLOYEE_ID);\n  const startTime = new Date(duration.startTime);\n  const diff = Date.now() - startTime.getTime();\n  let hour = diff / 1000 / 60 / 60;\n  const hourPointIndex = hour.toString().indexOf('.');\n  hour = hour.toString().substring(0, hourPointIndex);\n  let minutes = diff / 1000 / 60;\n  const minutesPointIndex = minutes.toString().indexOf('.');\n  minutes = minutes.toString().substring(0, minutesPointIndex);\n  const time = hour + \".\" + minutes;\n  const newTimeCount = duration.timeCount + parseFloat(time);\n  await DurationService.update(duration._links.self.href, {\n    timeCount: newTimeCount,\n    startTime: new Date()\n  });\n  return duration;\n}\n\n_c = FixExecuting;\nexport default FixExecuting;\n\nvar _c;\n\n$RefreshReg$(_c, \"FixExecuting\");","map":{"version":3,"names":["DurationService","EMPLOYEE_ID","FixExecuting","duration","getByUserAndIsLast","startTime","Date","diff","now","getTime","hour","hourPointIndex","toString","indexOf","substring","minutes","minutesPointIndex","time","newTimeCount","timeCount","parseFloat","update","_links","self","href"],"sources":["C:/big-projects/work-time/work-time-front/src/business-logic/FixTimeCount.js"],"sourcesContent":["import DurationService from \"../API/DurationService\";\r\n\r\nconst EMPLOYEE_ID = 31;\r\n\r\nasync function FixExecuting() {\r\n    let duration = await DurationService.getByUserAndIsLast(EMPLOYEE_ID);\r\n\r\n    const startTime = new Date(duration.startTime);\r\n    const diff = Date.now() - startTime.getTime();\r\n\r\n    let hour = (diff / 1000 / 60 / 60);\r\n    const hourPointIndex = hour.toString().indexOf('.')\r\n    hour = hour.toString().substring(0,hourPointIndex);\r\n\r\n    let minutes = diff / 1000 / 60;\r\n    const minutesPointIndex = minutes.toString().indexOf('.')\r\n    minutes = minutes.toString().substring(0,minutesPointIndex);\r\n\r\n    const time = hour + \".\" + minutes;\r\n    const newTimeCount = duration.timeCount + parseFloat(time);\r\n\r\n    await DurationService.update(duration._links.self.href, {timeCount: newTimeCount\r\n                                    ,startTime : new Date()});\r\n\r\n    return duration;\r\n}\r\n\r\nexport default FixExecuting;"],"mappings":"AAAA,OAAOA,eAAP,MAA4B,wBAA5B;AAEA,MAAMC,WAAW,GAAG,EAApB;;AAEA,eAAeC,YAAf,GAA8B;EAC1B,IAAIC,QAAQ,GAAG,MAAMH,eAAe,CAACI,kBAAhB,CAAmCH,WAAnC,CAArB;EAEA,MAAMI,SAAS,GAAG,IAAIC,IAAJ,CAASH,QAAQ,CAACE,SAAlB,CAAlB;EACA,MAAME,IAAI,GAAGD,IAAI,CAACE,GAAL,KAAaH,SAAS,CAACI,OAAV,EAA1B;EAEA,IAAIC,IAAI,GAAIH,IAAI,GAAG,IAAP,GAAc,EAAd,GAAmB,EAA/B;EACA,MAAMI,cAAc,GAAGD,IAAI,CAACE,QAAL,GAAgBC,OAAhB,CAAwB,GAAxB,CAAvB;EACAH,IAAI,GAAGA,IAAI,CAACE,QAAL,GAAgBE,SAAhB,CAA0B,CAA1B,EAA4BH,cAA5B,CAAP;EAEA,IAAII,OAAO,GAAGR,IAAI,GAAG,IAAP,GAAc,EAA5B;EACA,MAAMS,iBAAiB,GAAGD,OAAO,CAACH,QAAR,GAAmBC,OAAnB,CAA2B,GAA3B,CAA1B;EACAE,OAAO,GAAGA,OAAO,CAACH,QAAR,GAAmBE,SAAnB,CAA6B,CAA7B,EAA+BE,iBAA/B,CAAV;EAEA,MAAMC,IAAI,GAAGP,IAAI,GAAG,GAAP,GAAaK,OAA1B;EACA,MAAMG,YAAY,GAAGf,QAAQ,CAACgB,SAAT,GAAqBC,UAAU,CAACH,IAAD,CAApD;EAEA,MAAMjB,eAAe,CAACqB,MAAhB,CAAuBlB,QAAQ,CAACmB,MAAT,CAAgBC,IAAhB,CAAqBC,IAA5C,EAAkD;IAACL,SAAS,EAAED,YAAZ;IACvBb,SAAS,EAAG,IAAIC,IAAJ;EADW,CAAlD,CAAN;EAGA,OAAOH,QAAP;AACH;;KArBcD,Y;AAuBf,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}