{"ast":null,"code":"import TaskService from \"../API/TaskService\";\nimport DurationService from \"../API/DurationService\";\nconst EMPLOYEE_ID = 1;\n\nasync function FinishExecuting(task) {\n  await TaskService.update(task._links.self.href, {\n    status: 'COMPLETED'\n  });\n  let duration = await DurationService.getByUserAndIsLast(EMPLOYEE_ID);\n  const startTime = new Date(duration.startTime);\n  const diff = new Date().getMinutes() - startTime.getMinutes();\n  const newTimeCount = duration.timeCount + diff;\n  await DurationService.update(duration._links.self.href, {\n    timeCount: newTimeCount,\n    taskUri: null\n  });\n}\n\n_c = FinishExecuting;\nexport default FinishExecuting;\n\nvar _c;\n\n$RefreshReg$(_c, \"FinishExecuting\");","map":{"version":3,"names":["TaskService","DurationService","EMPLOYEE_ID","FinishExecuting","task","update","_links","self","href","status","duration","getByUserAndIsLast","startTime","Date","diff","getMinutes","newTimeCount","timeCount","taskUri"],"sources":["C:/big-projects/work-time/work-time-front/src/business-logic/FinishExecutingTask.js"],"sourcesContent":["import TaskService from \"../API/TaskService\";\r\nimport DurationService from \"../API/DurationService\";\r\n\r\nconst EMPLOYEE_ID = 1;\r\n\r\nasync function FinishExecuting(task) {\r\n    await TaskService.update(task._links.self.href, {status: 'COMPLETED'});\r\n\r\n    let duration = await DurationService.getByUserAndIsLast(EMPLOYEE_ID);\r\n\r\n    const startTime = new Date(duration.startTime);\r\n    const diff = new Date().getMinutes() - startTime.getMinutes();\r\n    const newTimeCount = duration.timeCount + diff;\r\n\r\n    await DurationService.update(duration._links.self.href, {timeCount: newTimeCount,\r\n                                taskUri : null});\r\n}\r\n\r\nexport default FinishExecuting;"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,oBAAxB;AACA,OAAOC,eAAP,MAA4B,wBAA5B;AAEA,MAAMC,WAAW,GAAG,CAApB;;AAEA,eAAeC,eAAf,CAA+BC,IAA/B,EAAqC;EACjC,MAAMJ,WAAW,CAACK,MAAZ,CAAmBD,IAAI,CAACE,MAAL,CAAYC,IAAZ,CAAiBC,IAApC,EAA0C;IAACC,MAAM,EAAE;EAAT,CAA1C,CAAN;EAEA,IAAIC,QAAQ,GAAG,MAAMT,eAAe,CAACU,kBAAhB,CAAmCT,WAAnC,CAArB;EAEA,MAAMU,SAAS,GAAG,IAAIC,IAAJ,CAASH,QAAQ,CAACE,SAAlB,CAAlB;EACA,MAAME,IAAI,GAAG,IAAID,IAAJ,GAAWE,UAAX,KAA0BH,SAAS,CAACG,UAAV,EAAvC;EACA,MAAMC,YAAY,GAAGN,QAAQ,CAACO,SAAT,GAAqBH,IAA1C;EAEA,MAAMb,eAAe,CAACI,MAAhB,CAAuBK,QAAQ,CAACJ,MAAT,CAAgBC,IAAhB,CAAqBC,IAA5C,EAAkD;IAACS,SAAS,EAAED,YAAZ;IAC5BE,OAAO,EAAG;EADkB,CAAlD,CAAN;AAEH;;KAXcf,e;AAaf,eAAeA,eAAf"},"metadata":{},"sourceType":"module"}